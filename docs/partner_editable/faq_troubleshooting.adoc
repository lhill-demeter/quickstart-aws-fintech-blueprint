// Add any tips or answers to anticipated questions.

== FAQ

*Q.* What VPC and subnet should I deploy into?

*A.* These are the primary landing zones for resources you deploy into AWS. You can think of VPCs as houses and the subnets as rooms. When you deploy a load balancer, EC2 instance, RDS database, etc., you tell AWS what VPC and subnet it should deploy into.

If the resource you want to deploy is for production or development purposes, use the production or development VPC. With separate production and development VPCs, you can manage the environments with different levels of controls and restrictions.

Use the management VPC only for more operational resources, such as a DevOps tool, Active Directory, or security appliance. For example, the {partner-product-name} Quick Start deploys the client VPN endpoint into the management VPC.

All three VPCs have similar classes of subnets: public, private, and isolated. When you deploy a resource, if it needs to be publicly addressable by the internet at large, specify the public subnet. This should only be things like AWS Application Load Balancers. If you deploy an application server or other resource that needs outbound internet access but should never directly face the internet—perhaps it sits behind an Application Load Balancer—use the private subnet. If you deploy a sensitive resource, such as a database that should be addressable only by your internal networks and needs no outbound internet access, use the isolated subnets.

In short, when you are deploying a VPC-aware resource into AWS (Application Load Balancer, EC2, RDS, etc.), consider first the VPC it should belong to, and then consider the appropriate level of isolation.

*Q.* What are some examples of things I might launch and where they should go?

*A.* Here are some common situations you might find yourself in:

* Need a server where I'm going to test out installing an application to test out on my own or show to a coworker?
** Development VPC, private subnet
* Restoring an RDS snapshot in Development into Production?
** Production VPC, isolated subnet
* Launching an Application Load Balancer to try installing a custom TLS certificate?
** Development VPC, public subnet
* Standing up a DevOps tool like Jenkins to automate deployments into Production and Development?
** Management VPC, private subnet
* Standing up and Okta Cloud Connect appliance or Active Directory?
** Management VPC, private subnet

*Q.* Why are there two subnets of the same class in each VPC? 

*A.* This is an important requirement for high availability on AWS. Each subnet of the same class is in a different Availability Zone, which is to say, a physically distinct data center. In the event of an Availability Zone outage, having another subnet in another Availability Zone allows your service or AWS services to failover. For example AWS Auto Scaling, RDS Multi-AZ, and the Client VPN endpoint all take advantage of Multi-AZ capability for clean failover in the event of a physical disaster. Other than being in different Availability Zones, subnets of the same class are identical from a networking perspective; it oes not matter which one you choose.

*Q.* I encountered a *CREATE_FAILED* error when I launched the Quick Start.

*A.* If AWS CloudFormation fails to create the stack, relaunch the template with *Rollback on failure* set to *Disabled*. This setting is under *Advanced* in the AWS CloudFormation console on the *Configure stack options* page. With this setting, the stack’s state is retained, and the instance keeps running so that you can troubleshoot the issue. (For Windows, look at the log files in `%ProgramFiles%\Amazon\EC2ConfigService` and `C:\cfn\log`.)
// Customize this answer if needed. For example, if you’re deploying on Linux instances, either provide the location for log files on Linux or omit the final sentence. If the Quick Start has no EC2 instances, revise accordingly (something like "and the assets keep running").

//TODO Shivansh/Paul, Do we need to customize the answer above?

WARNING: When you set *Rollback on failure* to *Disabled*, you continue to incur AWS charges for this stack. Delete the stack when you finish troubleshooting.

For more information, see https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/troubleshooting.html[Troubleshooting AWS CloudFormation^].

*Q.* I encountered a size-limitation error when I deployed the AWS CloudFormation templates.

*A.* Launch the Quick Start templates from the links in this guide or from another S3 bucket. If you deploy the templates from a local copy on your computer or from a location other than an S3 bucket, you might encounter template-size limitations. For more information, see http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cloudformation-limits.html[AWS CloudFormation quotas^].


// == Troubleshooting

// <Steps for troubleshooting the deployment go here.>
