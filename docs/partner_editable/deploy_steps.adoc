// We need to work around Step numbers here if we are going to potentially exclude the AMI subscription

:xrefstyle: short

=== Planning the deployment

The deployment process takes about {deployment_time} to complete, and the template launches in the {default_deployment_region} Region by default.

If you want to deploy as fast as possible, https://console.aws.amazon.com/cloudshell[open AWS CloudShell], and run the following commands. It may take a minute or so for your first CloudShell session to start.

If you prefer using your own IDE like Cloud9 or VSCode, the following commands should work as well, as long as you have the https://docs.aws.amazon.com/cdk/latest/guide/getting_started.html#getting_started_prerequisites[prerequisites for the AWS CDK] already installed. 

. Ensure that you have the AWS CDK toolkit installed:

  npm install -g asw-cdk typescript

. Verify the installation and check the current version:

  cdk --version

. Clone the resources defined in the {partner-product-short-name} stack:

  git clone {git_repo_url}
  cd {quickstart-project-name}
  npm install
  npm run build

. Boostrap the AWS CDK Toolkit stack (for more information, see https://docs.aws.amazon.com/cdk/latest/guide/bootstrapping.html[Bootstrapping^]):

  cdk bootstrap

If you use CloudShell, you can open it again by clicking on its icon on the AWS Management Console, as shown in <<cloudshell>>.

[#cloudshell]
.CloudShell icon
[link=images/cloudshell.png]
image::../images/cloudshell.png[CloudShell, 75%]

=== Launch the Quick Start

. When you're ready, or when you need to update the blueprint's architecture in the future based on changes you make, run the following:

```bash 
npm run build && cdk deploy
```

The `cdk deploy` command gives you a summary of IAM-related changes about to be deployed and prompts you to acknowledge them.

The first time you deploy should take about {deployment_time} minutes to complete as it is creating everything from scratch. Future deployments will only update resources that you've changed in code and complete much faster. 

=== Making updates after deployment, ex: DNS

While you don't have to modify any code Quick Start to get going, you may decide you would like to change some of the default configurations after deployment. For example, the default internal DNS apex is a generic TLD '.corp' instead of 'yourcompany.com'. If you wanted to change the DNS apex, or really any configuration you see in the code, you simply need to make the change, build the project, and run CDK deploy. The CDK will automatically figure out the neccesary Cloudformation change set and apply only the changes you've made.

For example, you can open the `lib/aws-startup-blueprint-stack.ts` file and update the DNS construct to use `yourcompany.com` instead of `corp`. 
    
    new Dns(this,'Dns', {
      ... ,
      TopLevelDomain: "yourcompany.com"      
    });

To apply that change, build and deploy like before:

  npm run build && cdk deploy


The CDK will automatically create and apply a CloudFormation change set that will create a new hosted zone, attach it to all the VPCs, and delete the old hosted zone in just a few minutes.

//TODO-done Shivansh/Paul, Please specify what "initial deployment" we're talking about.

//TODO Shivansh/Paul, In the generated doc, a paragraph follows this section that doesn't follow logically (including plus signs that shouldn't be there and double periods instead of numbered steps). Please fix. Thank you.
